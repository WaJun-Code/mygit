ssh it_stu198@202.121.181.113  (PAD7GBsz)
交大源https://mirrors.sjtug.sjtu.edu.cn/pypi/web/simple
从it_stu198拷贝到本地：scp -r it_stu198@202.121.181.113:/cluster/home/it_stu198/somes/Ubiquant_Market_Prediction/log* /home/wj/D/kaggle/JPX_Tokyo_Stock_Exchange_Prediction
从本地拷贝到it_stu198：scp -r /home/wj/D/kaggle/JPX_Tokyo_Stock_Exchange_Prediction it_stu198@202.121.181.113:/cluster/home/it_stu198/somes/

任务：预测固定2000支股票在不同日的收盘价变化率
    但是由于Target本身的变化趋势十分无规律，故可以转而预测【t+1，t+2】Close


其它指标：

    A、若今天上涨了，且成交量比昨天成交量适量增大（注意“适量”两个字〉，那么我们可以基本断定这只股票明天还涨。
    B、若今天上涨了，但是成交量比昨天小，那么基本断定，这只股票明天走阴，因为动能不足。
    C、若今天涨了，且成交量过大，动能耗尽，全部转化成势能了，已经到达局部顶点，明天基本断定下调。
    D、若今天跌了，成交量比昨天畏缩，那明天将止跌或者再跌幅度也将减小（第一天跌情况比较复杂）。
    E、若是连续第二天跌了，成交量又菱缩了，那明天就要反弹。
    F、若是连续跌了两天，今天成交量比昨天又放大了，这种情况就要根据此股所处的位置情况而定了，要么是最后一跌，就要反弹，要么明天还要跌。


    乖离率BIAS=[(当日收盘价-N日平均价)/N日平均价]*100%，其中N，一般5、6、10、12、24、30和72。在实际运用中，短线使用6日乖离率较为有效，中线则放大为10日或12日。
    1、RSI相对强弱指标是根据一定时期内上涨点数和下跌点数之和的比率制作出的一种技术曲线。能够反映出市场在一定时期内的景气程度，非常适合做短线差价操作。
        A——N日内收盘涨幅之和，B——N日内收盘跌幅之和(取正值)，N日RSI=A/（A+B）×100
       High52：close除以过去52个周的最高价

    2、KDJ的计算比较复杂，首先要选择周期（n日、n周等），再计算当天的未成熟随机值（即RSV值），然后再计算K值、D值、J值等。根据统计学原理，通过一个特定的周期（常为9日、9周等）内出现过的最高价、最低价及最后一个计算周期的收盘价及这三者之间的比例关系，来计算最后一个计算周期的未成熟随机值RSV，然后根据平滑移动平均线的方法来计算K值、D值与J值，并绘成曲线图来研判股票走势。C为当天的收盘价；Ln为之前n日内的最低价；Hn为之前n日内的最高价，则计算公式为：（对于掌握中短期行情走势比较准确）
        RSV = (C-Ln)/(Hn-Ln)，Ki = (2Ki-1)/3 + RSVi/3（Ki和RSVi分别表示某一天当天的K值和RSV值，Ki-1表示前一天的K值，若无前一天的K值，则用50来代替,同下），Di = (2Di-1)/3 + Ki/3，Ji = 3Ki-2Di
        1.K与D值永远介于0到100之间。D大于80时，行情呈现超买现象。D小于20时，行情呈现超卖现象。
        2.上涨趋势中，K值大于D值，K线向上突破D线时，为买进信号。下跌趋势中，K值小于D值，K线向下跌破D线时，为卖出信号。
        3.KD指标不仅能反映出市场的超买超卖程度，还能通过交叉突破发出买卖信号。
        4.KD指标不适于发行量小、交易不活跃的股票，但是KD指标对大盘和热门大盘股有极高准确性。
        5.当随机指标与股价出现背离时，一般为转势的信号。
        6.K值和D值上升或者下跌的速度减弱，倾斜度趋于平缓是短期转势的预警信号。
    3、MACD称为异同移动平均线，是从双指数移动平均线发展而来的，由快的指数移动平均线（EMA12）减去慢的指数移动平均线（EMA26）得到快线DIF，再用2×（快线DIF-DIF的9日加权移动均线DEA）得到MACD柱，即
        MACD=2×(DIF-DEA)，其中 DIF=今日EMA(12)－今日EMA(26)，【EMA（12）=前一日EMA（12）×11/13+今日收盘价×2/13，EMA（26）=前一日EMA（26）×25/27+今日收盘价×2/27】，今日DEA = 前一日DEA×8/10+今日DIF×2/10 也就是N=9的DIF的EMA。
       相应的ACD为DIF的历史累积和，ACD 线下降，而股价会上升时，为卖出信号； ACD 线上升，而股价下降时，为买进信号。
    4、ASI（振动升降指标）
        计算公式：A=当天最⾼价—前⼀天收盘价，B=当天最低价—前⼀天收盘价，C=当天最⾼价—前⼀天最低价，D=前⼀天收盘价—前⼀天开盘价A、B、C、D皆采⽤绝对值， E=当天收盘价—前⼀天收盘价，F=当天收盘价—当天开盘价，G=前⼀天收盘价—前⼀天开盘价，E、F、G采⽤其±差值3、 X=E+1/2F+G4、 K=⽐较A、B⼆数值，选出其中最⼤值5、⽐较A、B、C三数值：若A最⼤，则R=A+1/2B+1/4D若B最⼤，则R=B+1/2A+1/4D若C最⼤，则R=C+1/4D6、 L=37、 SI=50*X/R*K/L
    5、AR与BR指标：
        计算公式：AR(n)=n日内正数（high-open）累积/n日内负数累积（open-low），BR计算类似将上一天的收盘价减去当天的最低价，所得之数为负方（close-low），然后将当天的最高价减上一天的收盘价，所得之数为正方（high-close），然后分别累计。 
        AR单独使用：1.AR的值走高时表示人气旺盛，行情活跃，如果过高反映股价进入了高阶，选择好时机及时退出，AR的至没有具体的标准，AR值如果上升到150之上，股价就有可能回档下跌。2.AR的值走低时表示需求充实，人气衰退，如果过低反映股价进入了低谷，可以选择介入，AR值如果跌到70一下，股价就有可能反弹上升。
        两者配合使用：1.当BR<AR时，并且BR<100时，可以选择逢低买入。2.当BR<Ar时，而且BRAR,再转成BA<AR时，也可以考虑买入。3.AR与BR都在迅速上升，说明股价已经将要接近顶部，可以选择逢高卖出。4.只有BR上升，而AR是在盘整或者小跌时,也需要逢高卖出。5.如果BR在高峰回跌达到了1-2倍，但AR 没有出现警戒提醒，可以选择逢低买入。
    6、PVT价量趋势指标：
        如果设x=(今日收盘价—昨日收盘价)/昨日收盘价×当日成交量，那么当日PVT指标值则为从第一个交易日起每日X值的累加。【价格上升，PVT指标线下降为卖出信号。价格下跌，PVT指标线上升为买进信号。PVT的用法基本同OBV，但PVT比OBV能更快地反映趋势。】
       OBV指投资者活跃在股市上的程度，计算公式很特殊，纯属是人为规定将成交量分为正、负值来勾描人气兴衰，即：每天将股市收盘价与昨日股市收盘价相比，如今天收盘价高于昨日收盘价，则将今日成交量值列为正值，反之列为负值。经过一段时间的累计，则形成了OBV值。
        一般情况下，OBV上升，股价随之上升，说明人气集聚，股价还可能继续维持上升态势，股民可以建仓。反之则相反。非常需要配合其他技术指标共同分析研判股市走势。
    7、累计成交量CVI指标：上涨股票的成交量减去下跌股票的成交量，然后将其与前期滚动加总成交量相加计算而成的。它可以显示出货币是流入还是流出股票市场。
    8、动态买卖气指标 ADTM单独使⽤准确率往往偏低（⼀般低于50%），更多情况必需经过其它指标过滤，例如使⽤CCI过滤ADTM后准确率能提升⾄50%以上。低于-0.5时为低风险区，⾼于+0.5时为⾼风险区，需注意风险。
       CCI顺势指数，【-100到100为一个区间，一般配合其它指标使用】
    9、Atr是一种波动性指数，也称为平均指数：1. atr指数用于设定止损位。由于atr是衡量波动性的指标，atr值越大，投资者在市场波动时被震荡止损的可能性就越大。因此，在这种情况下，止损和进场价格之间的距离应该设置得更远。2.ATR指数用于选择进出点。短期atr一般大于长期atr。我们可以通过短期和长期atr曲线的波动差，按照相应的价格方向进入市场，在趋势相对稳定的时候进行平仓。3.利用atr值匹配资金，很明显atr值大的投资产品价格波动更大，会有更大的盈利机会。
    10、CR股票指标又叫中间意愿指标，它和AR、BR指标又很多相似之处，但更有自己独特的研判功能，是分析股市多空双方力量对比、把握买卖股票时机的一种中长期技术分析工具。
    11、MassIndex观察MASS指标的曲线图时，必须特别注意其曲线“凸出的部分”。当股价的高低波幅差距扩大，或者股价的动量指标急速喷出时，都会造成曲线形成“凸出的部分”。
    12、Boll布林线利用统计原理，求出股价的标准差及其信赖区间，从而确定股价的波动范围及未来走势，利用波带显示股价的安全高低价位，因而也被称为布林带。布林指标和麦克指标MIKE一样同属路径指标，股价波动在上限和下限的区间之内，这条带状区的宽窄，随着股价波动幅度的大小而变化，股价涨跌幅度加大时，带状区变宽，涨跌幅度狭小盘整时，带状区则变窄。
    13、Elder爱耳德射线指标是结合了各个指标和无数震荡指标的市场趋势的特征。它使用指数移动平均线指标（EMA）最佳的时段是13，作为追踪指数。震荡指数反映了牛力和熊力。
    14、BBI多空指标是一种将不同日数移动平均线加权平均之后的综合指标，属于均线型指标，一般选用3日、6日、12日、24日等4条平均线。在使用移动平均线时，投资者往往对参数值选择有不同的偏好，而多空指标恰好解决了中短期移动平均线的期间长短合理性问题。1.股价位于BBI上方，视为多头市场。2.股价位于BBI下方，视为空头市场。so on。。。
    15、MA移动平均线（MA）具有趋势的特性，它比较平稳，不像日K线会起起落落地震荡。越长期的移动平均线，越能表现稳定的特性。不轻易向上向下，必须等股价趋势的真正明朗。移动平均线说到底是一种趋势追踪工具，便于识别趋势已经终结或者反转，新的趋势是否正在形成。
     EMA简单的说，当要比较数值与均价的关系时，用 MA 就可以了，而要比较均价的趋势快慢时，用 EMA 更稳定；有时，在均价值不重要时，也用 EMA 来平滑和美观曲线。
     TEMA三重指数移动平均线从DEMA发展而来
    16、异同离差乖离率指标（DBCD交易指标）计算方法：（1）计算乖离率BIAS；（2）计算不同日的乖离率之间的离差；（3）对离差进行指数移动平滑处理【金叉与死叉：蓝色均线上穿洋红色线是金叉，为买入信号。蓝色均线下穿洋红色线是死叉，为卖出信号。下图中绿色圈为卖出点，红色圈为买入点，可以看到指标正确率较高。】
    17、MFI资金流量指标是相对强弱指标（RSI）和人气指标（OBV）两者的结合，MFI指标可以用于测度交易量的动量和投资兴趣，而交易量的变化为股价未来的变化提供了线索，所以MFI指标可以帮助判断股票价格变化的趋势。
    18、MTM动量指标，一般情况下，MTM由上向下跌破中心线时为卖出时机，相反，MTM由下向上突破中心线时为买进时机。
    19、Ulcer溃疡指数尝试通过衡量价格回撤来衡量持有交易或投资的压力。溃疡指数基于下降波动性有害、上升拨动性有利的概念。
    20、DHILO波幅中位数（median of volatility），每日对数最高价和对数最低价差值的3月内中位数。属于趋势型因子
    21、EMV简易波动指标定义：是用相对股票成交量除以相对振幅作为衡量股价中间价波动百分比的基数，来得到股价中间价的相对波动范围。EMV值上升代表放量上涨，在价格的上升阶段是正常的信号;EMV值下降，代表缩量下跌，在价格下跌阶段也是一个正常的信号。
    22、RVI相对活力指数指标
    23、ChaikinOscillator佳庆指标与股价产生背离时，可视为反转讯号等。
        ChaikinVolatility
    24、UOS终极波动指标
    25、DMI动向指标或趋向指标通过分析股票价格在涨跌过程中买卖双方力量均衡点的变化情况，即多空双方的力量的变化受价格波动的影响而发生由均衡到失衡的循环过程，从而提供对趋势判断依据的一种技术指标。
    26、ARBR指标的实战技巧主要集中在ARBR曲线所处的位置和运行方向等两个方面。AR指标是反映市场当前情况下多空双方力量发展对比的结果。它是以当日的开盘价为基点。与当日最高价相比较，依固定公式计算出来的强弱指标。BR指标也是反映当前情况下多空双方力量争斗的结果。不同的是它是以前一日的收盘价为基础，与当日的最高价、最低价相比较，依固定公式计算出来的强弱指标。
    27、PSY心理线指标是研究投资者对股市涨跌产生心理波动的情绪指标。它对股市短期走势的研判具有一定的参考意义。将一定时期内投资者趋向买方或卖方的心理事实转化为数值，从而判断股价的未来趋势。
    28、WVAD是一种加权的量价动量指标，其作用在于测量从开盘到收盘期间，买方与卖方各自的爆发力程度。中文名称：威廉变异离散量，该指标是测量股价由开盘至收盘期间，多空双方的力量，是一种将成交量加权的量价指标。其主要的理论精髓，在于重视一天中开盘到收盘之间的价位，而将此区域之上的价位视为压力
    29、ROC变动率指标是以当日的收盘价和N天前的收盘价比较，通过计算股价某一段时间内收盘价变动的比例，应用价格的移动比较来测量价位动量，达到事先探测股价买卖供需力量的强弱，进而分析股价的趋势及其是否有转势的意愿，属于反趋势指标之一。
    30、ARC
    31、APBMA



股票影响因素：
    ①公司盈利情况。公司盈利多，股价上涨;盈利少或亏损，股价下跌。
    ②股利分配政策。股利高，则股价涨; 反之，股价下跌。
    ③各种经济指标。主要包括国民生产总值、经济成长率、工农业生产指数、货币供给量、对外贸易额、物价水准等。在通常情况下，这些指标上升，股价上涨; 反之，则下跌。
    ④利率环境。利率低、生产资金筹措容易，利息负担轻，公司盈利增加，股价上涨。此外，股票价格还受政治、军事、法律、文化、自然等众多因素的影响。人们可通过对以上影响股价的诸因素的分析，做出对未来股市的预期。

    ①首先要看大盘（一般约定俗成指股本比较大的股票。）的走向如何，近期市场的整体交易策略如何，如果大盘很好，个股也会比较好，大盘很差，个股也很难逆势上扬；
        高开又不回落，而且成交量放大，那么这个股票就可能要上涨。。可以看你所要买的股票是否和大盘的走向一致，如果是的话，那么最好的办法就是盯住大盘，在股价上升到顶点时卖出，在股价下降到底时买入。这样做虽然不能保证你买卖完全正确，但至少可以卖到一个相对的高价和买到一个相对的低价，而不会买一个最高价和卖一个最低价。
    ②其次还要看个股的基本面，市盈率高低，市净率，收益情况；
    ③再看个股消息面有没有利好消息；
    ④最后还需要从技术面进行分析，换手率、交易量、量比等指标。
        总手数也叫做成交量。有时它是比股价更为重要的指标。总手数与流通股数的比称为换手率，它说明持股人中有多少人是在当天买入的。换手率高，说明该股买卖的人多，容易上涨。但是如果不是刚上市的新股，却出现特大换手率（超过百分之五十），则常常在第二天就下跌，所以最好不要买入。
        量比这个指标所反映出来的是当前盘口的成交力度与最近五天的成交力度的差别，这个差别的值越大表明盘口成交越趋活跃，从某种意义上讲，越能体现主力即时做盘，准备随时展开攻击前蠢蠢欲动的盘口特征。我们可以从量比曲线与数值与曲线上，可以看出主流资金的市场行为，如主力的突发性建仓，建完仓后的洗盘，洗盘结束后的拉升，这些行为可以让我们一目了然！
        量比为0.8-1.5倍，则说明成交量处于正常水平；
        量比在1.5-2.5倍之间则为温和放量，如果股价也处于温和缓升状态，则升势相对健康，可继续持股，若股价下跌，则可认定跌势难以在短期内结束，从量的方面判断应可考虑停损退出；
        量比在2.5-5倍，则为明显放量，若股价相应地突破重要支撑或阻力位置，则突破有效的几率颇高，可以相应地采取行动；
        量比达5-10倍，则为剧烈放量，如果是在个股处于长期低位出现剧烈放量突破，涨势的后续空间巨大，是“钱”途无量的象征。但是，如果在个股已有巨大涨幅的情况下出现如此剧烈的放量，则值得高度警惕。
        量比达到10倍以上的股票，一般可以考虑反向操作。在涨势中出现这种情形，说明见顶的可能性压倒一切，即使不是彻底反转，至少涨势会休整相当长一段时间。在股票处于绵绵阴跌的后期，突然出现的巨大量比，说明该股在目前位置彻底释放了下跌动能。
        量比达到20倍以上的情形基本上每天都有一两单，是极端放量的一种表现，这种情况的反转意义特别强烈，如果在连续的上涨之后，成交量极端放大，但股价出现“滞涨”现象，则是涨势行将死亡的强烈信号。当某只股票在跌势中出现极端放量，则是建仓的大好时机。
        量比在0.5倍以下的缩量情形也值得好好关注，其实严重缩量不仅显示了交易不活跃的表象，同时也暗藏着一定的市场机会。缩量创新高的股票多数是长庄股，缩量能创出新高，说明庄家控盘程度相当高，而且可以排除拉高出货的可能。缩量调整的股票，特别是放量突破某个重要阻力位之后缩量回调的个股，常常是不可多得的买入对象。

K线：（多方-买方，空方-卖方，Close大为阳）from pyecharts import Kline  (Kline.add("title",xlist,data,is_datazoom_show=True) )
    在当天的位置上开盘价处画一条横线，收盘价处也画一条横线，再将这两条横线用两根竖线连起来，就构成了一个小方块。如果开盘价比收盘价高，称为收阴，这条K线称为阴线。可以把这个小方块涂成蓝色或黑色。如果开盘价比收盘价低，称为收阳，这条K线称为阳线。可以把这个小方块涂成红色，也可以不涂颜色，留出空白。然后找出最高价和最低价的点，将这两个点和小方块的横线的中点连接起来。如果这条连线在小方块的上方就称为上影线，如果这条连线在小方块的下方就称为下影线，也有时两个价格重合，即开盘价或者收盘价同时也就是最高价或者最低价，有一边就没有影线，称之为光头线或光脚线。那个小方块称为实体。
    将每天的K线都画在一张图上，则称之为日K线图，同样也可以画出周K线图和月K线图。在电脑软件的帮助下，在计算机中我们还可以看到5分钟、15分钟、30分钟和60分钟的K线图。
    一般来说，阳线说明买方的力量强过卖方，经过一天多空双方力量的较量，以多方的胜利而告终。阳线越长，说明多方力量胜过空方越多，后市继续走强的可能性就越大。
    相反，若是收成阴线表示卖方力量强过买方力量，阴线越长，说明空方力量胜过多方越多，后市走弱的可能性就越大。
    不带上、下影线的K线为光头光脚的K线，这在股市上比较少见。它说明股市从开市到收市一路走高（或走低），后市自然一般将继续沿此方向前进。与此类似的是光头阳线和光脚阴线，至少说明了收市前一方占了绝对优势，第二天继续占优的可能性极大。如果说不带影线的K线说明一方占了绝对压倒优势，上、下影线的长度则说明了多、空双方斗争激烈的程度，影线越长，斗争越激烈。这时我们须将实体与影线结合起来看：
    阳线带上影线，说明空方开始处于较弱势，待股价升到最高价后空方又强势反弹，使价格有小幅回落（低于最高价）。最终虽然股价上涨，多方胜利，但该胜利得来不易，继续上升有困难。
    阳线带下影线，说明多方力量大于空方，但在多方与空方较量过程中，空方曾使股价下跌，只是多方力量更强又使股价回升，多方最终胜利，后市有上涨的可能性。
    阴线带上影线，说明空方力量大于多方，并使股价下跌取得最终胜利，后市有继续下跌的可能性（但不排除庄家故意为之的可能）。
    阴线带下影线，说明多方力量大于空方，空方虽然取得暂时胜利，但其力量在减弱，再下跌已可能性不大。
    无论如何，可以确定的是小阳线和小阴线的影响不如大阳线和大阴线的影响来得大。
    
    当K线的实体由于开盘价与收盘价相等或十分接近而变得很窄，而上影线和下影的长度也差不多时，我们通常称之为十字星，这是多空双方力量暂时取得平衡的结果，因而往往是转势的前兆。但也有时只是上 升或下跌过程中一个暂时的停顿。这时我们就必须把两个、三个甚至更多的K线放在一起来观察了。
    如十字星出现在连日上涨之后就可能是下跌的信号，而如果十字星出现在连日下跌之后就可能是上涨的信号。
    
    周K线图在分析股市上有特殊重要的意义。因为一天的走势容易受人为操纵所影响，而庄家要操纵周K线要困难得多，所以周K 线有比较高的 准确度。
    
    如果两根并列的K线在价格上不连续，即一根K线的最高价比另一根 K线的最低价还低，这种现象称之为跳空，价格上断开的部分称为缺口。这是股价变动大的表现。在股价上升或下降的过程中出现缺口常会使原来的趋势变得更加强烈。在有重大利空或利好消息时，尤其容易出现大的跳空缺口。
    尤其要注意的是岛形反转，即在一个向上（或向下）的大跳空缺口之后不久又出现一个向下（或向上）的大跳空缺口，这是股势强烈反转的信号.
    为了满足不同的需要，K线图又可以细分为：5分钟K线图，15分钟K线图，30分钟K线图，60分钟K线图，日K线图，周K线图，月K线图，甚至45天K线图。
    
    ·大阳线（长红）：开盘价近于全日的最低价，随后价格一路上扬至最高价处收盘，表示市场买方踊跃，涨势未尽
    ·大阴线（长黑/长绿）：开盘价近于全日的最高价，随后价格一路下滑至最低价收盘，表示市场强烈跌势，特别是出现在高价区域，更加危险
    ·下影阳线：价格一度大幅下滑，但受到买盘势力支持，价格又回升向上，收盘在最高价处，属强势形态
    ·下影阴线：价格一度大幅下滑后但受到买盘势力支持，价格回升向上，虽然收盘价仍然低于开盘价，也可视为强势。但在高价区出现时，说明价格有回调要求，应注意卖出
    ·上影阳线：价格冲高回落，涨势受阻，虽然收盘价仍高于开盘价，但上方有阻力，可视为弱势
    ·上影阴线：价格冲高受阻，涨势受阻，收盘价低于开盘价，上方有阻力，可视为弱势
    · 下十字线：开盘后价格大幅下滑，但在低位处获得支撑，下方买盘积极主动，最终在最高价附近收盘，属强势。当长下影线出现在低价区时，常常是重要的反转信号
    · 倒十字线：价格冲高后在高位处遇到强大阻力，最终被迫在开盘价附近收盘。虽有上攻愿望，但市场有修整要求，弱势。当倒十字线出现在高价区时，常常是重要的变盘信号
    ·十字星：买卖双方势均力敌，走势平稳；但在强势市中，十字星往往成为市场强弱转换的交叉点，后市可能变化。
    · 一字线：四价合一K线反映出市场成交清淡，后市难有大的变化；但如果出现在涨停（跌停）处，表明买卖双方力量悬殊太大，后市方向明确，短期难以逆转。
两日K线组合
    通过观察连续两日的K线形态，并结合目 前所处位置为高价区还是低价区来测市，可靠性更高
高位反转形态：
    · 昨日收上十字线，多头上攻受阻；第二天再度高开低走，最终收盘于昨收盘价附近，表明多空争夺激烈，上方卖压较重，应密切留意后市，注意出货
    · 昨日收十字线，价格有反转迹象；第二天即开盘于昨收盘价之下，随后价格一路下滑，最终以阴线报收，表明空方占据主动，多预示行情转跌，应注意出货
    · 昨日收中阳线，买方气势正盛；第二天高开后多方无力顺势上攻，大幅下滑于昨收盘价之下收盘，于是行情走软；高位盘整后出现此形态，应提防庄家拉高出货
    · 昨日收中阳线，买方气势正盛；第二天再度上攻受阻，最终以阴线报收，但仍在昨日收盘价之上，表示多空交战异常激烈，多头胜一筹。应密切留意后市变化
低位反转形态：
    · 昨日收下十字线，表明下方买盘积极，价格止跌回稳，第二天开盘后价格持续走高，最终以小阳线报收，于是多头信心增强，价格回升在即。该组合出现在低价区，是标准的反弹形态
    · 昨日收中阴线，空头来势凶猛，第二天顺势大幅低开，但买方在低位积极入市，不跌反涨，最终以阳线报收，并高于昨收盘价，表明空方下攻乏力，价格回升可能性大
    · 昨日收中阴线，空头气盛，但第二天反而大幅高开，价格一路上扬，最终收盘于最高价处，表明多方大获全胜，后市可望转强
k线的组合形态很多，其意义也不尽相同，应依据不同价格水平及其变动趋势来分析。参数设置 可叠加其他辅助指标（如移动平均线，SAR，成交堆积）等一同研判


先把price、stocklist粘在一起，然后就可以根据【section】粘trades，再按月粘fin，最后考虑option
fin里只有5万左右数据在price里，但是包含所有股票id共4072个，这是因为fin是季度收益表，所以每年只记录了1、4、7、10四个月的情况，故应该根据3个月为跨度的来粘
粘完stock_list、fin、trades后得到初步【基础特征】
特征工程：
    基于股票或金融知识的特征衍生：
        对当天Open、High、Low、Close【互相做差或通过做K线图】 以求凸显当天趋势，进一步对间隔【1、3、5、9、20、30天】的Close做差统计长步趋势。
        计算换手率（成交量/发行总股数）、5日乖离率、量比=（现成交总手数 / 现累计开市时间(分) ）/ 过去5日平均每分钟成交量 等
        基于前述【基本特征+衍生特征】，分【Section、行业】再进行相应统计，得到所在市场、行业的历史状况
    时序特征：
        基于前述特征上一些机器学习常用特征构造手段，如滑窗采样【bz，n，dim】进行展开【bz，n*dim】



可以对Close做LSTM等时序预测

每个表的规格：
"./data_specifications/options_spec.csv"维度(31, 5)
"./data_specifications/stock_fin_spec.csv"维度(45, 5)
"./data_specifications/stock_list_spec.csv"维度(16, 5)
"./data_specifications/stock_price_spec.csv"维度(12, 5)
"./data_specifications/trades_spec.csv"维度(56, 5)

test里的2000支股票全在train里
"./example_test_files/financials.csv"维度(14, 45)
"./example_test_files/options.csv"维度(9076, 31)
"./example_test_files/sample_submission.csv"维度(112000, 3)
"./example_test_files/secondary_stock_prices.csv"维度(4178, 11)
"./example_test_files/stock_prices.csv"维度(4000, 11)
"./example_test_files/trades.csv"维度(2, 56)

"./supplemental_files/financials.csv"维度(4546, 45)
"./supplemental_files/options.csv"维度(245560, 31)
"./supplemental_files/secondary_stock_prices.csv"维度(118450, 12)
"./supplemental_files/stock_prices.csv"维度(112000, 12)
"./supplemental_files/trades.csv"维度(80, 56)

stock_prices里的2000支股票与secondary_stock_prices里的2371支不同
"./train_files/financials.csv"维度(92956, 45)股票季度收益报告的结果
"./train_files/options.csv"维度(3658100, 31)期权状态的数据基于更广泛市场的各种。许多期权包括对股票市场未来价格的隐含预测，因此可能会引起人们的兴趣，即使这些期权不是直接计分的。
"./train_files/secondary_stock_prices.csv"维度(2384575, 12)股票，但许多流动性较低的证券也在东京市场交易。该文件包含这些证券的数据，这些证券没有评分，但可能对评估整个市场有兴趣。
"./train_files/stock_prices.csv"维度(2332531, 12)每只股票和目标列的每日收盘价。
"./train_files/trades.csv"维度(1712, 56)市场（股票所在）上一个商业周的交易量汇总。总共就'Growth Market (Mothers/JASDAQ)', 'Prime Market (First Section)', 'Standard Market (Second Section)'三种市场

"stock_list.csv"维度(4417, 16)证券代码和公司名称之间的映射，以及公司所在行业的一般信息。与前面的trades.csv对应此处的section有['First Section (Domestic)', 'ETFs/ ETNs', 'JASDAQ(Standard / Domestic)', 'JASDAQ(Growth/Domestic)', 'Mothers (Domestic)', 'Second Section(Domestic)', 'First Section (Foreign)', 'REIT, Venture Funds, Country Funds and Infrastructure Funds', 'JASDAQ(Standard / Foreign)', 'Mothers (Foreign)', 'Second Section(Foreign)']十一种（市场/产品）组合

前期主要能利用train_files里的数据进行探索，结合stock_list

文件结构：
    1.financials.csv：
 ['DisclosureNumber',公开文件唯一标识符
 'DateCode',组合Date_SecuritiesCode（这对于stock_fin来说不是唯一的，因为一家公司一天可以公开多个文档）
 'Date',交易日期。此列用于与stock_price的交易日期对齐
 'SecuritiesCode',本地证券代码
 'DisclosedDate',文件公开年月日
 'DisclosedTime',文件公开的时刻
 'DisclosedUnixTime',文件公开的datetime的Unix时间。
 'TypeOfDocument',由ID指示的文档类型
 'CurrentPeriodEndDate',当前accounting period的结束日期
 'TypeOfCurrentPeriod',当前accounting period的类型。[注]通常情况下，公司不会独立披露第四季度财务报表，而是在年度财务业绩（FY）中披露。因此，第四季度和第五季度的财务报表只有在公司采用非常规会计年度（超过12个月）时才会出现
 'CurrentFiscalYearStartDate',当前fiscal year的开始日期。
 'CurrentFiscalYearEndDate',当前fiscal year的结束日期。
 'NetSales',总销售额（一家公司赚取的总销售额）减去退货、津贴和折扣（日元）。[IFRS]收入。
 'OperatingProfit',净销售额减去运营费用（销售商品成本和SG&A费用）[日元]。\n\n[注]如果银行或保险公司采用日本标准，则为空。
 'OrdinaryProfit',[JP Standard]营业收入加上营业外收入（利息收入、股息等）减去营业外支出（利息支出、证券销售损失等）[日元][US Standard/IFRS]所得税前收入[日元]\n或息税前收入[日元]。
 'Profit',所得税前收入（普通收入加上或减去非经常收入或损失）减去税款\n\n归属于母公司所有者的[合并]利润。
 'EarningsPerShare',每股收益（EPS），即净收入'Profit'除以该期间的平均股份数。
 'TotalAssets',资产总额，包括流动资产（现金、有价证券等）、PP&E（不动产、厂房和设备）、无形资产（软件、专利等）和其他资产（日元）。
 'Equity',总资产减去总负债（流动负债和固定负债之和）[日元]
 'EquityToAssetRatio',股权除以总资产，前面两行相除，与季度平均Close关联度到了0.35
 'BookValuePerShare',每股账面价值（BPS），即期末权益除以期末股数。
 'ResultDividendPerShare1stQuarter',第一季度末的股息金额。[日元] 
 'ResultDividendPerShare2ndQuarter',第二季度末的股息金额。[日元] 
 'ResultDividendPerShare3rdQuarter',第三季度末的股息金额。[日元] 
 'ResultDividendPerShareFiscalYearEnd',第四季度末的股息金额。[日元] 
 'ResultDividendPerShareAnnual',年度股息总额。[日元] 
 'ForecastDividendPerShare1stQuarter',第一季度末的预期股息金额。[日元]
 'ForecastDividendPerShare2ndQuarter',第二季度末的预期股息金额。[日元]
 'ForecastDividendPerShare3rdQuarter',第三季度末的预期股息金额。[日元]
 'ForecastDividendPerShareFiscalYearEnd',第四季度末的预期股息金额。[日元]
 'ForecastDividendPerShareAnnual',预计年度股息总额。[日元]
 'ForecastNetSales',预计年净销售额[日元]
 'ForecastOperatingProfit',预期年营业收入[日元]
 'ForecastOrdinaryProfit',预期年度普通收入[日元]
 'ForecastProfit',预期年净收入[日元]
 'ForecastEarningsPerShare',预期每股年收益[日元]
 'ApplyingOfSpecificAccountingOfTheQuarterlyFinancialStatements',是与否bool型 运用会计方法编制季度合并财务报表。\n\n[注]如果难以区分会计政策变更和会计估计变更，则为空。
 'MaterialChangesInSubsidiaries',本期内重要子公司的变化。（导致合并范围变化的指定子公司的变化）
 'ChangesBasedOnRevisionsOfAccountingStandard',与会计准则修订等相关的会计政策变更。
 'ChangesOtherThanOnesBasedOnRevisionsOfAccountingStandard',基于除会计准则修订等以外的正当理由变更会计政策。
 'ChangesInAccountingEstimates',会计估计变更。（为编制上一个合并会计年度或任何上一个合并会计年度的合并财务报表，或根据新信息编制的上一个或上一个季度合并会计期间或累计季度合并会计期间的季度合并财务报表而作出的会计估计变更）（目前已提供）
 'RetrospectiveRestatement',在合并财务报表或季度合并财务报表中的反映，上一个合并会计年度的合并财务报表或任何上一个合并会计年度的合并财务报表或上一个季度合并会计期间或累计季度合并会计期间的季度合并财务报表中的错误更正。\n\n[注]如果难以区分会计政策变更和会计估计变更，则为空。
 'NumberOfIssuedAndOutstandingSharesAtTheEndOfFiscalYearIncludingTreasuryStock',截至当前会计期间期末已发行股份（包括库存股份）的数量。
 'NumberOfTreasuryStockAtTheEndOfFiscalYear',截至当前会计期间期末的库存股数量。
 'AverageNumberOfShares']当前会计年度开始日期与当前会计年度结束日期之间的平均股份数。（前面两个col的差）


    2.options.csv：
 ['DateCode',同前面的组合Date_SecuritiesCode不同之处在于是OptionsCode
 'Date',
 'OptionsCode',见https://www.jpx.co.jp/english/sicc/regulations/b5b4pj0000023mqo-att/(HP)sakimono20220208-e.pdf
 'WholeDayOpen',整个交易日的开盘价
 'WholeDayHigh',整个交易日的高价
 'WholeDayLow',整个交易日的低价
 'WholeDayClose',整个交易日的收盘价
 'NightSessionOpen',夜场开盘价
 'NightSessionHigh',夜场高价
 'NightSessionLow',夜场低价
 'NightSessionClose',夜场收盘价
 'DaySessionOpen',当日开盘价
 'DaySessionHigh',当日高价
 'DaySessionLow',当日低价
 'DaySessionClose',当日收盘价
 'TradingVolume',整个交易日产品/合同的交易量
 'OpenInterest',整个交易日产品/合同的Open interest
 'TradingValue',整个交易日产品/合同的交易价值
 'ContractMonth',产品/合同的合同年/月
 'StrikePrice',产品/合同的执行价格
 'DaySessionVolume',当日产品/合同的交易量
 'Putcall',解释：Put:1\r\nCall:2
 'LastTradingDay',最后交易日
 'SpecialQuotationDay',计算特殊报价的日期
 'SettlementPrice',结算价
 'TheoreticalPrice',一天结束时的理论价格
 'BaseVolatility',计算结算价格时的波动率
 'ImpliedVolatility',隐含波动率
 'InterestRate',计算利率
 'DividendRate',翻译Dividendv yeild
 'Dividend']股息


    3.secondary_stock_prices.csv：(与4的column相同)

    4.stock_prices.csv：
 ['RowId',同前面的组合Date_SecuritiesCode
 'Date',交易日期
 'SecuritiesCode',本地证券代码
 'Open',一天的首次交易价格
 'High',一天的最高交易价格
 'Low',一天的最低交易价格
 'Close',当日最后交易价格
 'Volume',每天交易的股票数量
 'AdjustmentFactor',计算发生split/reverse-split时的理论价格/数量（不包括股息/股份分配）
 'SupervisionFlag',受监管证券和退市证券的标志https://www.jpx.co.jp/english/listing/market-alerts/supervision/00-archives/index.html
 'ExpectedDividend',除权日的预期股息值。该值在除息日前2个营业日记录。
 'Target']翻译Change ratio of adjusted closing price between t+2 and t+1 where t+0 is TradeDate

以下数据与C*V的关联性很高0.2-0.45【C*V与Close相关性很高，说明可以以此来反映市场兴衰】
    5.trades.csv：
 ['Date',数据发布日期，通常在下一周的星期四。
 'StartDate',本交易周的第一个交易日
 'EndDate',本交易周的最后一个交易日
 'Section',市场部名称
 'TotalSales',总销售额  ，请检查以下文件。已发布的文件https://www.jpx.co.jp/english/markets/statistics-equities/investor-type/b5b4pj000004r9zg-att/stock_val_1_220301.pdf按投资者类型划分的交易计划https://www.jpx.co.jp/english/markets/statistics-equities/investor-type/07.html
 'TotalPurchases',总采购额 
 'TotalTotal',总计
 'TotalBalance',总结余
 'ProprietarySales',专利
 'ProprietaryPurchases',
 'ProprietaryTotal',
 'ProprietaryBalance',
 'BrokerageSales',委托交易佣金
 'BrokeragePurchases',
 'BrokerageTotal',
 'BrokerageBalance',
 'IndividualsSales',个人
 'IndividualsPurchases',
 'IndividualsTotal',
 'IndividualsBalance',
 'ForeignersSales',外国人
 'ForeignersPurchases',
 'ForeignersTotal',
 'ForeignersBalance',
 'SecuritiesCosSales',证券公司
 'SecuritiesCosPurchases',
 'SecuritiesCosTotal',
 'SecuritiesCosBalance',
 'InvestmentTrustsSales',投资信托 
 'InvestmentTrustsPurchases',
 'InvestmentTrustsTotal',
 'InvestmentTrustsBalance',
 'BusinessCosSales',商业公司 
 'BusinessCosPurchases',
 'BusinessCosTotal',
 'BusinessCosBalance',
 'OtherInstitutionsSales',其他机构 
 'OtherInstitutionsPurchases',
 'OtherInstitutionsTotal',
 'OtherInstitutionsBalance',
 'InsuranceCosSales',保险公司
 'InsuranceCosPurchases',
 'InsuranceCosTotal',
 'InsuranceCosBalance',
 'CityBKsRegionalBKsEtcSales',地方银行
 'CityBKsRegionalBKsEtcPurchase',
 'CityBKsRegionalBKsEtcTotal',
 'CityBKsRegionalBKsEtcBalance',
 'TrustBanksSales',信托银行 
 'TrustBanksPurchases',
 'TrustBanksTotal',
 'TrustBanksBalance',
 'OtherFinancialInstitutionsSales',其他金融机构 
 'OtherFinancialInstitutionsPurchases',
 'OtherFinancialInstitutionsTotal',
 'OtherFinancialInstitutionsBalance']

    6.stock_list.csv：
 ['SecuritiesCode',本地证券代码
 'EffectiveDate',生效日期
 'Name',翻译Name of security
 'Section/Products',部门/产品
 'NewMarketSegment',新的细分市场从2022-04-04开始生效（截至2022年3月11日15:30 JST）https://www.jpx.co.jp/english/equities/market-restructure/market-segments/index.html
 '33SectorCode',部门编码https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_13_sector.pdf
 '33SectorName',部门名称https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_13_sector.pdf
 '17SectorCode',见https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_13_sector.pdf
 '17SectorName',见https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_13_sector.pdf
 'NewIndexSeriesSizeCode',见（TOPIX New Index Series code）https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_12_size.pdf
 'NewIndexSeriesSize',见（TOPIX New Index Series Name）https://www.jpx.co.jp/english/markets/indices/line-up/files/e_fac_12_size.pdf
 'TradeDate',计算市值的交易日期
 'Close',计算市值的收盘价
 'IssuedShares',已发行股份
 'MarketCapitalization',2021 12月3日市值
 'Universe0']（市值排名前2000的股票）a flag of prediction target universe
 'MarketCapitalization'='Close'*'IssuedShares'
